#include "led.h"


LED_CONTROL led[8]=
{
		{GPIOA,GPIO_PIN_5,GPIO_PIN_SET, GPIO_PIN_RESET},
		{GPIOA,GPIO_PIN_6,GPIO_PIN_SET, GPIO_PIN_RESET},
		{GPIOA,GPIO_PIN_7,GPIO_PIN_SET, GPIO_PIN_RESET},
		{GPIOB,GPIO_PIN_6,GPIO_PIN_SET, GPIO_PIN_RESET},
		{GPIOC,GPIO_PIN_7,GPIO_PIN_SET, GPIO_PIN_RESET},
		{GPIOA,GPIO_PIN_9,GPIO_PIN_SET, GPIO_PIN_RESET},
		{GPIOA,GPIO_PIN_8,GPIO_PIN_SET, GPIO_PIN_RESET},
		{GPIOB,GPIO_PIN_10,GPIO_PIN_SET, GPIO_PIN_RESET}
};

void led1On(uint8_t num)
{
	HAL_GPIO_WritePin(led[num].port, led[num].pinNumber, led[num].onState);
}
void led1Off(uint8_t num)
{
	HAL_GPIO_WritePin(led[num].port, led[num].pinNumber, led[num].offState);
}


void ledOn(uint8_t num)
{
	//한꺼번에 8개 켜기
	for(uint8_t i=0; i<num; i++)
	{
		HAL_GPIO_WritePin(led[i].port, led[i].pinNumber, led[i].onState);
	}
}
void ledOff(uint8_t num)
{
	for(uint8_t i=0; i<num; i++)
		{
			HAL_GPIO_WritePin(led[i].port, led[i].pinNumber, led[i].offState);
		}
}
void ledToggle(uint8_t num)
{
	HAL_GPIO_TogglePin(led[num].port, led[num].pinNumber);
	HAL_Delay(200);
}

void ledLeftShift(uint8_t num)
{
    for(uint8_t i = 0; i <= num; i++)
    {
        ledOn(i);
        HAL_Delay(100);
    }
    HAL_Delay(500);
    for(uint8_t i = 0; i <= num; i++)
    {
        ledOff(i);
    }
}

void ledLeftShift1(uint8_t num, uint8_t k)
{
	 for(uint8_t i = 0; i <= num; i++)
	 {
		 if(led[i].onState == 1)
		 {

			 if(i+k <num)
			 {
				 led1On(i+k);
				 led1Off(i);
				 HAL_Delay(500);
			 }
			 else
			 {
				 led1On(i+k-num);
				 led1Off(i);
				 HAL_Delay(500);
			 }


		 }
	 }
}




void ledRightShift(uint8_t num)
{
	for(uint8_t i = 0; i < num; i++)
	    {
	        led1On(num-(1+i));
	        HAL_Delay(100);
	    }
	    HAL_Delay(500);
	    for(uint8_t i = 0; i < num; i++)
	    {
	        ledOff(i);
	    }
}

void ledFlower(uint8_t num)
{
	for(uint8_t i=0; i<num-4; i++)
	{
		led1On(3-i);
		led1On(4+i);
		HAL_Delay(200);
		led1Off(3-i);
		led1Off(4+i);
	}
	ledOff(num);
	HAL_Delay(200);
}
